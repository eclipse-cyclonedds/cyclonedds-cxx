module regression_models {

@nested struct s_1 {
string d[2];
};

@final
struct s_2 {
s_1 c[2];
};

@nested
union U switch(char) {
  case 'b':
    short s;
};

@nested
union V switch(char) {
  case 'b':
    U u;
};

@final
struct s_u {
  @key V c;
};

typedef long td_l;

@final struct s_o_td {
  @optional td_l c;
};

@final struct s_o {
  @optional long c;
};

@topic @mutable struct s_o_2 {
  @optional long c;
  @optional long d;
};

@topic @appendable struct td_1 {
  long l;
};

typedef sequence<td_1> td_2;

@topic @final struct td_3 {
  td_2 c;
};

typedef double td_d;

union duplicate_types_union switch(long) {
  case 1:
    long l_1;
  case 2:
    td_l l_2; //should be the same as l_1
  case 3:
    double d_1;
  //to check whether is_same_type sees s_1 and s_2 as different types
  case 4:
    s_1 s_s_1;
  case 5:
    s_2 s_s_2;
  //to check whether the default case is deduplicated correctly as well
  default:
    td_d d_2;  //should be the same as d_1;
};

};
